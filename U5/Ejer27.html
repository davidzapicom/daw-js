<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<title></title>
</head>
<body>
<header style="background-color: orange; width: 1000px; height: 50px;">Generador de formularios</header>
<div style="display: flex;">
	<div style="background-color: yellow; width:500px; height: 300px;" id="p">
		<div id="p2"></div> <br>
		<button type="button" id="formul">Crear pregunta</button>
		<input type="submit" value="Generar formulario" id="generar">
	</div>
	<div style="background-color: silver; width: 500px; height: 300px;">
		<div id="preguntas"></div>
	</div>
</div>
<footer id="foot" style="width: 1000px; height: 50px;"></footer>

<script type="text/javascript">
	var i =1;
	document.getElementById("formul").addEventListener("click",function(){
        var form = document.createElement("form");
        var input = document.createElement("input");
        input.type = "text";
        var input1 = document.createElement("input");
        var input2 = document.createElement("input");
        var input3 = document.createElement("input");
        input1.type = "radio";
        input1.value = "1";
        input1.name = "preguntas";
        input2.type = "radio";
        input2.value = "2";
        input2.name = "preguntas";
        input3.type = "radio";
        input3.value = "3";
        input3.name = "preguntas";
        var text1 = document.createElement("input");
        var text2 = document.createElement("input");
        var text3 = document.createElement("input");
        text1.type = "text";
        text2.type = "text";
        text3.type = "text";
        var num = document.createTextNode(i+".-");
        form.appendChild(document.createElement("br"));
        form.appendChild(num);
        form.appendChild(input);
        form.appendChild(document.createElement("br"));
        form.appendChild(document.createElement("br"));
        form.appendChild(input1);
        form.appendChild(text1);
        form.appendChild(document.createElement("br"));
        form.appendChild(document.createElement("br"));
        form.appendChild(input2);
        form.appendChild(text2);
        form.appendChild(document.createElement("br"));
        form.appendChild(document.createElement("br"));
        form.appendChild(input3);
        form.appendChild(text3);

        document.getElementById("preguntas").appendChild(form);

        var boton1 = document.createElement("input");
        boton1.value = "Guardar pregunta";
        boton1.type = "submit";
        boton1.id = "b1";
        var boton2 = document.createElement("input");
        boton2.value= "Cancelar pregunta";
        boton2.type = "reset";
        boton2.id = "b2";
        

        document.getElementById("foot").appendChild(boton1);
        document.getElementById("foot").appendChild(boton2);

        document.getElementById("foot").style.backgroundColor= "orange";

        document.getElementById("b1").addEventListener("click",function(){
        	var x = document.createElement("input");
        	x.type= "submit";
            x.value = "Pregunta";
            x.name = "pregunta"
        	x.appendChild(form);
        	document.getElementById("p2").appendChild(x);
        	document.getElementById("p2").appendChild(document.createElement("br"));
        	document.getElementById("foot").innerHTML= "";
        	document.getElementById("foot").style.backgroundColor= "";
        });

        document.getElementById("b2").addEventListener("click",function(){
            form.reset();
        	 });
        

        i++;
	});

	document.getElementById("generar").addEventListener("click",function(){
     var nombre = prompt("Introduce un nombre para este test: ");
     var ventana;
     ventana = window.open ("","ventana","width=600px, height=500px;");
     ventana.document.write ("<h1>" + nombre + "</h1>");
     var q = document.getElementsByName("pregunta");
     var pr = document.getElementsByName("preguntas");
     var c=0;
     for (var x=0; x<q.length; x++){
     	ventana.document.write ("<div>");
     ventana.document.write("<br>");
     var pregs = q[x].textContent;
     ventana.document.write (pregs);
     var s = q[x].getElementsByTagName("input")[0].value;
     ventana.document.write(s);
     ventana.document.write("<br>");
     var s2 = q[x].getElementsByTagName("input")[1].value;
     ventana.document.write(s2);
     ventana.document.write("<input type='radio' value=rad1 name=opt" + x+">");
     var s3 = q[x].getElementsByTagName("input")[2].value;
     ventana.document.write(s3);
     ventana.document.write("<br>");
     var s4 = q[x].getElementsByTagName("input")[3].value;
     ventana.document.write(s4);
     ventana.document.write("<input type='radio' value='rad2' name=opt" +x+">");
     var s5 = q[x].getElementsByTagName("input")[4].value;
     ventana.document.write(s5);
     ventana.document.write("<br>");
     var s6 = q[x].getElementsByTagName("input")[5].value;
     ventana.document.write(s6);
     ventana.document.write("<input type='radio' value='rad3' name=opt"+ x+">");
     var s7 = q[x].getElementsByTagName("input")[6].value;
     ventana.document.write(s7);
     ventana.document.write("<br>");
     ventana.document.write("</div>");
        
             var opt = document.getElementsByName("opt"+x);
             for (var i=0; i<opt.length; i++){
            	if (pr[i].checked == opt[i].checked){
            		c++;
            	}
            }

      } 
     ventana.document.write ("<div>");
     ventana.document.write ('<button type="button" id="b" >Comprobar</button>');
     ventana.document.write ("<button type='button'>Restaurar</button>")
     ventana.document.write ("</div>");
     var be = document.getElementById("b");

      be.addEventListener("click",function(){
      	alert ("Has acertado: " + c);
      } );
	});
</script>
</body>
</html>